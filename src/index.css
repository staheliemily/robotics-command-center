@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 48%;
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }

  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: hsl(var(--muted-foreground) / 0.3);
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground) / 0.5);
  }
}

/* Smooth theme transitions */
html {
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Focus ring styles */
.focus-ring {
  outline: none;
}
.focus-ring:focus {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

/* Gradient backgrounds for sections */
.gradient-ftc {
  background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
}

.gradient-frc {
  background: linear-gradient(135deg, #c62828 0%, #e53935 100%);
}

.gradient-blue {
  background: linear-gradient(135deg, #1976d2 0%, #2196f3 100%);
}

.gradient-purple {
  background: linear-gradient(135deg, #7c3aed 0%, #a78bfa 100%);
}

/* Frappe Gantt Base Styles */
:root{--g-arrow-color: #1f2937;--g-bar-color: #fff;--g-bar-border: #fff;--g-tick-color-thick: #ededed;--g-tick-color: #f3f3f3;--g-actions-background: #f3f3f3;--g-border-color: #ebeff2;--g-text-muted: #7c7c7c;--g-text-light: #fff;--g-text-dark: #171717;--g-progress-color: #dbdbdb;--g-handle-color: #37352f;--g-weekend-label-color: #dcdce4;--g-expected-progress: #c4c4e9;--g-header-background: #fff;--g-row-color: #fdfdfd;--g-row-border-color: #c7c7c7;--g-today-highlight: #37352f;--g-popup-actions: #ebeff2;--g-weekend-highlight-color: #f7f7f7}.gantt-container{line-height:14.5px;position:relative;overflow:auto;font-size:12px;height:var(--gv-grid-height);width:100%;border-radius:8px}.gantt-container .popup-wrapper{position:absolute;top:0;left:0;background:#fff;box-shadow:0 10px 24px -3px #0003;padding:10px;border-radius:5px;width:max-content;z-index:1000}.gantt-container .popup-wrapper .title{margin-bottom:2px;color:var(--g-text-dark);font-size:.85rem;font-weight:650;line-height:15px}.gantt-container .popup-wrapper .subtitle{color:var(--g-text-dark);font-size:.8rem;margin-bottom:5px}.gantt-container .popup-wrapper .details{color:var(--g-text-muted);font-size:.7rem}.gantt-container .popup-wrapper .actions{margin-top:10px;margin-left:3px}.gantt-container .popup-wrapper .action-btn{border:none;padding:5px 8px;background-color:var(--g-popup-actions);border-right:1px solid var(--g-text-light)}.gantt-container .popup-wrapper .action-btn:hover{background-color:brightness(97%)}.gantt-container .popup-wrapper .action-btn:first-child{border-top-left-radius:4px;border-bottom-left-radius:4px}.gantt-container .popup-wrapper .action-btn:last-child{border-right:none;border-top-right-radius:4px;border-bottom-right-radius:4px}.gantt-container .grid-header{height:calc(var(--gv-lower-header-height) + var(--gv-upper-header-height) + 10px);background-color:var(--g-header-background);position:sticky;top:0;left:0;border-bottom:1px solid var(--g-row-border-color);z-index:1000}.gantt-container .lower-text,.gantt-container .upper-text{text-anchor:middle}.gantt-container .upper-header{height:var(--gv-upper-header-height)}.gantt-container .lower-header{height:var(--gv-lower-header-height)}.gantt-container .lower-text{font-size:12px;position:absolute;width:calc(var(--gv-column-width) * .8);height:calc(var(--gv-lower-header-height) * .8);margin:0 calc(var(--gv-column-width) * .1);align-content:center;text-align:center;color:var(--g-text-muted)}.gantt-container .upper-text{position:absolute;width:fit-content;font-weight:500;font-size:14px;color:var(--g-text-dark);height:calc(var(--gv-lower-header-height) * .66)}.gantt-container .current-upper{position:sticky;left:0!important;padding-left:17px;background:#fff}.gantt-container .side-header{position:sticky;top:0;right:0;float:right;z-index:1000;line-height:20px;font-weight:400;width:max-content;margin-left:auto;padding-right:10px;padding-top:10px;background:var(--g-header-background);display:flex}.gantt-container .side-header *{transition-property:background-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;background-color:var(--g-actions-background);border-radius:.5rem;border:none;padding:5px 8px;color:var(--g-text-dark);font-size:14px;letter-spacing:.02em;font-weight:420;box-sizing:content-box;margin-right:5px}.gantt-container .side-header *:last-child{margin-right:0}.gantt-container .side-header *:hover{filter:brightness(97.5%)}.gantt-container .side-header select{width:60px;padding-top:2px;padding-bottom:2px}.gantt-container .side-header select:focus{outline:none}.gantt-container .date-range-highlight{background-color:var(--g-progress-color);border-radius:12px;height:calc(var(--gv-lower-header-height) - 6px);top:calc(var(--gv-upper-header-height) + 5px);position:absolute}.gantt-container .current-highlight{position:absolute;background:var(--g-today-highlight);width:1px;z-index:999}.gantt-container .current-ball-highlight{position:absolute;background:var(--g-today-highlight);z-index:1001;border-radius:50%}.gantt-container .current-date-highlight{background:var(--g-today-highlight);color:var(--g-text-light);border-radius:5px}.gantt-container .holiday-label{position:absolute;top:0;left:0;opacity:0;z-index:1000;background:--g-weekend-label-color;border-radius:5px;padding:2px 5px}.gantt-container .holiday-label.show{opacity:100}.gantt-container .extras{position:sticky;left:0}.gantt-container .extras .adjust{position:absolute;left:8px;top:calc(var(--gv-grid-height) - 60px);background-color:#000000b3;color:#fff;border:none;padding:8px;border-radius:3px}.gantt-container .hide{display:none}.gantt{user-select:none;-webkit-user-select:none;position:absolute}.gantt .grid-background{fill:none}.gantt .grid-row{fill:var(--g-row-color)}.gantt .row-line{stroke:var(--g-border-color)}.gantt .tick{stroke:var(--g-tick-color);stroke-width:.4}.gantt .tick.thick{stroke:var(--g-tick-color-thick);stroke-width:.7}.gantt .arrow{fill:none;stroke:var(--g-arrow-color);stroke-width:1.5}.gantt .bar-wrapper .bar{fill:var(--g-bar-color);stroke:var(--g-bar-border);stroke-width:0;transition:stroke-width .3s ease}.gantt .bar-progress{fill:var(--g-progress-color);border-radius:4px}.gantt .bar-expected-progress{fill:var(--g-expected-progress)}.gantt .bar-invalid{fill:transparent;stroke:var(--g-bar-border);stroke-width:1;stroke-dasharray:5}:is(.gantt .bar-invalid)~.bar-label{fill:var(--g-text-light)}.gantt .bar-label{fill:var(--g-text-dark);dominant-baseline:central;font-family:Helvetica;font-size:13px;font-weight:400}.gantt .bar-label.big{fill:var(--g-text-dark);text-anchor:start}.gantt .handle{fill:var(--g-handle-color);opacity:0;transition:opacity .3s ease}.gantt .handle.active,.gantt .handle.visible{cursor:ew-resize;opacity:1}.gantt .handle.progress{fill:var(--g-text-muted)}.gantt .bar-wrapper{cursor:pointer}.gantt .bar-wrapper .bar{outline:1px solid var(--g-row-border-color);border-radius:3px}.gantt .bar-wrapper:hover .bar{transition:transform .3s ease}.gantt .bar-wrapper:hover .date-range-highlight{display:block}

/* Frappe Gantt - Clean Dark Theme */
.bg-surface-950 {
  --g-arrow-color: #6366f1;
  --g-bar-color: #6366f1;
  --g-bar-border: transparent;
  --g-tick-color-thick: #27272a;
  --g-tick-color: #27272a;
  --g-actions-background: #27272a;
  --g-border-color: #27272a;
  --g-text-muted: #a1a1aa;
  --g-text-light: #fafafa;
  --g-text-dark: #e4e4e7;
  --g-progress-color: #4f46e5;
  --g-handle-color: #818cf8;
  --g-weekend-label-color: #27272a;
  --g-expected-progress: #4338ca;
  --g-header-background: #09090b;
  --g-row-color: #09090b;
  --g-row-border-color: #27272a;
  --g-today-highlight: #6366f1;
  --g-popup-actions: #27272a;
  --g-weekend-highlight-color: #18181b;
}

/* Force clean black background */
.bg-surface-950 .gantt-container,
.bg-surface-950 .gantt-container .gantt,
.bg-surface-950 .gantt-container .gantt .grid-background {
  background: #09090b !important;
}

.bg-surface-950 .gantt-container .gantt .grid-row {
  fill: #09090b !important;
}

.bg-surface-950 .gantt-container .gantt .grid-row:nth-child(even) {
  fill: #09090b !important;
}

.bg-surface-950 .gantt-container .grid-header {
  background: #09090b !important;
}

.bg-surface-950 .gantt-container .gantt .row-line {
  stroke: #27272a !important;
}

.bg-surface-950 .gantt-container .gantt .tick {
  stroke: #27272a !important;
}

.bg-surface-950 .gantt-container .gantt .tick.thick {
  stroke: #3f3f46 !important;
}

.bg-surface-950 .gantt-container .current-upper {
  background: #09090b !important;
}

.bg-surface-950 .gantt-container .lower-text,
.bg-surface-950 .gantt-container .upper-text {
  color: #a1a1aa !important;
}

.bg-surface-950 .gantt-container .popup-wrapper {
  background: #18181b;
  border: 1px solid #3f3f46;
  box-shadow: 0 10px 40px rgba(0,0,0,0.5);
}

.bg-surface-950 .gantt-container .popup-wrapper .title {
  color: #fafafa;
}

.bg-surface-950 .gantt-container .popup-wrapper .subtitle,
.bg-surface-950 .gantt-container .popup-wrapper .details {
  color: #a1a1aa;
}

/* Task bars */
.bg-surface-950 .gantt-container .gantt .bar-wrapper .bar {
  outline: none !important;
}

.bg-surface-950 .gantt-container .gantt .bar-label {
  fill: #fafafa !important;
}

.bg-surface-950 .gantt-container .gantt .bar-label.big {
  fill: #fafafa !important;
}

/* Frappe Gantt Overrides */
.gantt-container {
  overflow: visible;
  width: 100%;
}

.gantt-container .gantt {
  position: relative !important;
}

.gantt-container .gantt {
  background-color: #ffffff;
}

.gantt-container .gantt .grid-header {
  fill: #f9fafb;
}

.gantt-container .gantt .grid-row {
  fill: #ffffff;
}

.gantt-container .gantt .grid-row:nth-child(even) {
  fill: #f9fafb;
}

.gantt-container .gantt .row-line {
  stroke: #e5e7eb;
}

.gantt-container .gantt .tick {
  stroke: #e5e7eb;
}

.gantt-container .gantt .today-highlight {
  fill: rgba(99, 102, 241, 0.1);
}

/* Task bar colors by status */
.gantt-container .gantt .bar-wrapper.gantt-milestone .bar {
  fill: #6366f1;
}

.gantt-container .gantt .bar-wrapper.gantt-milestone .bar-progress {
  fill: #4f46e5;
}

.gantt-container .gantt .bar-wrapper.gantt-completed .bar {
  fill: #22c55e;
}

.gantt-container .gantt .bar-wrapper.gantt-completed .bar-progress {
  fill: #16a34a;
}

.gantt-container .gantt .bar-wrapper.gantt-blocked .bar {
  fill: #ef4444;
}

.gantt-container .gantt .bar-wrapper.gantt-blocked .bar-progress {
  fill: #dc2626;
}

.gantt-container .gantt .bar-wrapper.gantt-critical .bar {
  fill: #f97316;
}

.gantt-container .gantt .bar-wrapper.gantt-critical .bar-progress {
  fill: #ea580c;
}

.gantt-container .gantt .bar-wrapper.gantt-high .bar {
  fill: #eab308;
}

.gantt-container .gantt .bar-wrapper.gantt-high .bar-progress {
  fill: #ca8a04;
}

.gantt-container .gantt .bar-wrapper.gantt-unassigned .bar {
  fill: #9ca3af;
}

.gantt-container .gantt .bar-wrapper.gantt-unassigned .bar-progress {
  fill: #6b7280;
}

/* Default task bar style */
.gantt-container .gantt .bar-wrapper.gantt-task .bar {
  fill: #3b82f6;
}

.gantt-container .gantt .bar-wrapper.gantt-task .bar-progress {
  fill: #2563eb;
}

/* Disable transitions during drag for smoother experience */
.gantt-container .gantt .bar-wrapper .bar {
  transition: none !important;
}

.gantt-container .gantt .bar-wrapper:hover .bar {
  transition: none !important;
}

.gantt-container .gantt .handle {
  transition: none !important;
}

/* Bar labels */
.gantt-container .gantt .bar-label {
  fill: #1f2937;
  font-weight: 500;
  font-size: 12px;
}

.gantt-container .gantt .bar-label.big {
  fill: #ffffff;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

/* Arrow/dependency lines */
.gantt-container .gantt .arrow {
  stroke: #6366f1;
  stroke-width: 1.5;
}

/* Date headers */
.gantt-container .gantt .lower-text,
.gantt-container .gantt .upper-text {
  fill: #374151;
  font-size: 12px;
}

/* Popup styling */
.gantt-container .popup-wrapper {
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
  padding: 0;
  min-width: 200px;
}

.gantt-container .popup-wrapper .gantt-popup {
  padding: 12px 16px;
}

.gantt-container .popup-wrapper .gantt-popup h4 {
  margin: 0 0 8px 0;
  font-size: 14px;
  font-weight: 600;
  color: #111827;
}

.gantt-container .popup-wrapper .gantt-popup p {
  margin: 4px 0;
  font-size: 13px;
  color: #4b5563;
}

.gantt-container .popup-wrapper .gantt-popup .popup-hint {
  margin-top: 10px;
  padding-top: 8px;
  border-top: 1px solid #e5e7eb;
  font-size: 11px;
  color: #9ca3af;
  font-style: italic;
}

/* Dark mode overrides for Frappe Gantt */
.dark .gantt-container .gantt {
  background-color: #111827;
}

.dark .gantt-container .gantt .grid-header {
  fill: #1f2937;
}

.dark .gantt-container .gantt .grid-row {
  fill: #111827;
}

.dark .gantt-container .gantt .grid-row:nth-child(even) {
  fill: #1f2937;
}

.dark .gantt-container .gantt .row-line {
  stroke: #374151;
}

.dark .gantt-container .gantt .tick {
  stroke: #374151;
}

.dark .gantt-container .gantt .today-highlight {
  fill: rgba(99, 102, 241, 0.2);
}

.dark .gantt-container .gantt .bar-label {
  fill: #f3f4f6;
}

.dark .gantt-container .gantt .lower-text,
.dark .gantt-container .gantt .upper-text {
  fill: #d1d5db;
}

.dark .gantt-container .popup-wrapper {
  background: #1f2937;
  border-color: #374151;
}

.dark .gantt-container .popup-wrapper .gantt-popup h4 {
  color: #f9fafb;
}

.dark .gantt-container .popup-wrapper .gantt-popup p {
  color: #d1d5db;
}

.dark .gantt-container .popup-wrapper .gantt-popup .popup-hint {
  border-color: #374151;
  color: #6b7280;
}

/* Handle/resize styling */
.gantt-container .gantt .handle {
  fill: #6366f1;
  cursor: ew-resize;
}

/* Responsive Gantt */
@media (max-width: 640px) {
  .gantt-container .gantt .bar-label {
    font-size: 10px;
  }

  .gantt-container .gantt .lower-text,
  .gantt-container .gantt .upper-text {
    font-size: 10px;
  }
}
